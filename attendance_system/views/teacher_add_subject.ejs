<!DOCTYPE html>
<% include partials/header %>

<div class="container drop-down-school">
  <div class="row login-sel-cont">
    <div class="col-sm-offset-4 col-sm-4">
      <div class="card">
      <!-- <div class="row"> -->
        <div class="col-lg-12">
        </div>
       <!-- Card Content -->
        <div class="container-fluid custom-container">
          <div class="row custom-full-row">

            <div class="verticalLine">
              <div class="login-card-title">
                Add Subject
              </div>
            </div>
          </div>
        </div>

        <form class="login-box-form" action="/teacher/change_password" method="post">
          <div class="container-fluid">

            <div class="row">
              <div class="input-field col s12">
                <select id="school" >
                  <option value="" disabled selected>Choose School</option>
                  <option value="1">usict</option>
                </select>
                <label>School Selection</label>
              </div>
            </div>

            <div class="row">
              <div class="input-field col s12">
                <select id="course">
                  <option value="" disabled selected>Choose  course</option>
                  <option value="1">Option 1</option>
                </select>
                <label>Course Selection</label>
              </div>
            </div>

            <div class="row">
              <div class="input-field col s12">
                <select id="stream">
                  <option value="" disabled selected>Choose stream</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                </select>
                <label>Stream Selection</label>
              </div>
            </div>

            <div class="row">
              <div class="input-field col s12">
                <select id="semester">
                  <option value="" disabled selected>Choose semester</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="1">4</option>
                  <option value="2">5</option>
                  <option value="3">6</option>
                  <option value="1">7</option>
                  <option value="2">8</option>
                </select>
                <label>Semester Selection</label>
              </div>
            </div>

            <div class="row">
              <div class="input-field col s12">
                <select id="subjects">
                  <option value="" disabled selected>Choose subject</option>
                  <option value="1">Option 1</option>
                  <option value="2">Option 2</option>
                  <option value="3">Option 3</option>
                </select>
                <label>Subject Selection</label>
              </div>
            </div>
            <button style="margin-bottom: 1em;" class="btn waves-effect waves-light right" type="submit" name="action">Submit
             <i class="material-icons right">send</i>
           </button>
          </div>
        </form>
      </div>
    </div>
    <div class="col-sm-">

    </div>
  </div>
</div>

<script type="text/javascript">
   $(document).ready(function() {
    $('select').material_select();
  });

  $('#school').change(function () {
    var school = $('#school').find(":selected").text();

    $.ajax({
      url: "/api/get_course",
      type: 'GET',
      data: { school: school },
      success: function(result) {
        console.log(result);

          var _options =""
          var count = 2;

          var output = [];

          // $.each(result, function(key, value)
          // {
          //   output.push('<option value="'+ key +'">'+ value.course +'</option>');
          // });

          // $('#course').html(output.join(''));

          $.each(result, function(key, value) {
            console.log(value.course);
            // $('#course').html(output.join(''));

            //$('#school').append($("<option></option>").attr("value",key).text(value.course));
            console.log('<option value="'+ count+'">'+ value.course +'</option>');
            $('select').append('<option value="'+ count+'">'+ value.course +'</option>');
            // _options +=('<option value="'+ count+'">'+ value.couremose +'</option>');
            count++;
          });

        // for (var x = 0;x<result.length;x++) {
        //   ;
        // }
      },
      error: function(result) {
        alert("there is some error .")
      }
   });
  });


  $('#course').change(function () {
    var school = $('#school').find(":selected").text();
    var course = $('#course').find(":selected").text();

    $.ajax({
      url: "/api/get_stream",
      type: 'GET',
      data: { school: school, course: course },
      success: function(result) {
        console.log(result);

          // $.each(result, function(key, value)
          // {
          //   output.push('<option value="'+ key +'">'+ value.course +'</option>');
          // });

          // $('#course').html(output.join(''));

          $.each(result, function(key, value) {
            console.log(value.stream);
            // $('#course').html(output.join(''));

             $('#school').append($("<option></option>").attr("value",key).text(value.stream));

            // $('#course').append('<option value="'+ count+'">'+ value.course +'</option>');
            // _options +=('<option value="'+ count+'">'+ value.course +'</option>');
            count++;
          });

        // for (var x = 0;x<result.length;x++) {
        //   ;
        // }
      },
      error: function(result) {
        alert("there is some error .")
      }
   });
  });

  $('#stream').change(function () {
    var school = $('#school').find(":selected").text();
    var course = $('#course').find(":selected").text();
    var stream = $('$stream').find(":selected").text();

    $.ajax({
      url: "/api/get_stream",
      type: 'GET',
      data: { school: school, course: course, stream: stream },
      success: function(result) {
        console.log(result);

          // $.each(result, function(key, value)
          // {
          //   output.push('<option value="'+ key +'">'+ value.course +'</option>');
          // });

          // $('#course').html(output.join(''));

          $.each(result, function(key, value) {
            console.log(value.subject_name);
            // $('#course').html(output.join(''));

             $('#school').append($("<option></option>").attr("value",key).text(value.subject_name));

            // $('#course').append('<option value="'+ count+'">'+ value.course +'</option>');
            // _options +=('<option value="'+ count+'">'+ value.course +'</option>');
            count++;
          });

        // for (var x = 0;x<result.length;x++) {
        //   ;
        // }
      },
      error: function(result) {
        alert("there is some error .")
      }
   });
  });


</script>

<% include partials/footer %>
